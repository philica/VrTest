<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Dream - Aframe - VR walkthrough</title>
  <meta name="description" content="Dream - Aframe - VR walkthrough" />
  <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.5.1/dist/aframe-look-at-component.min.js"></script>

  <!-- Hotspot -->
  <script>
    AFRAME.registerComponent("hotspots", {
      init: function () {
        this.el.addEventListener("reloadspots", function (evt) {
          //get the entire current spot group and scale it to 0
          var currspotgroup = document.getElementById(evt.detail.currspots);
          currspotgroup.setAttribute("scale", "0 0 0");

          //get the entire new spot group and scale it to 1
          var newspotgroup = document.getElementById(evt.detail.newspots);
          newspotgroup.setAttribute("scale", "1 1 1");
        });
      },
    });
    AFRAME.registerComponent("spot", {
      schema: {
        linkto: { type: "string", default: "" },
        spotgroup: { type: "string", default: "" },
      },
      init: function () {
        //add image source of hotspot icon
        this.el.setAttribute("src", "#hotspot");
        //make the icon look at the camera all the time
        this.el.setAttribute("look-at", "#cam");

        var data = this.data;

        this.el.addEventListener("click", function () {
          //set the skybox source to the new image as per the spot
          var sky = document.getElementById("skybox");
          sky.setAttribute("src", data.linkto);

          var spotcomp = document.getElementById("spots");
          var currspots = this.parentElement.getAttribute("id");
          //create event for spots component to change the spots data
          spotcomp.emit("reloadspots", {
            newspots: data.spotgroup,
            currspots: currspots,
          });
        });
      },
    });
  </script>
</head>

<body>
  <a-scene background="color: #ECECEC">
    <a-assets>
      <!-- Images -->
      <img id="point1" src="./Assets/photo_2024-05-23 01.25.13.jpeg" />
      <img id="point2" src="./Assets/photo_2024-05-23 01.25.29.jpeg" />
      <img id="point3" src="./Assets/photo_2024-05-23 01.25.34.jpeg" />
      <img id="point4" src="./Assets/photo_2024-05-23 01.25.40.jpeg" />
      <img id="point5" src="./Assets/photo_2024-05-23 01.26.11.jpeg" />
      <img id="point6" src="./Assets/photo_2024-05-23 01.26.15.jpeg" />
      <img id="point7" src="./Assets/photo_2024-05-23 01.26.20.jpeg" />
      <img id="point8" src="./Assets/photo_2024-05-23 01.26.25.jpeg" />
      <img id="point9" src="./Assets/photo_2024-05-23 01.26.29.jpeg" />
      <img id="point11" src="./Assets/photo_2024-05-23 01.26.34.jpeg" />
      <img id="point12" src="./Assets/photo_2024-05-23 01.26.42.jpeg" />
      <img id="point13" src="./Assets/photo_2024-05-23 01.26.49.jpeg" />
      <img id="point14" src="./Assets/photo_2024-05-23 01.26.54.jpeg" />
      <img id="point15" src="./Assets/photo_2024-05-23 01.26.58.jpeg" />

      <!-- Hotspot image -->
      <img id="hotspot"
        src="https://cdn.glitch.global/ab94be26-64af-4574-96d8-f6c32306fcee/hotspot(1).png?v=1715726013942" />
    </a-assets>


    <a-entity id="spots" hotspots>
      <!-- first image -->
      <a-entity id="group-point1" scale="1 1 1">
        <a-image spot="linkto:#point2;spotgroup:group-point2" position="-10 1 -2"></a-image>
      </a-entity>

      <!-- second image  -->
      <a-entity id="group-point2" scale="0 0 0">
        <a-image spot="linkto:#point1;spotgroup:group-point1" position="19 0 -1"></a-image>
        <a-image spot="linkto:#point3;spotgroup:group-point3" position="-10 0 0"></a-image>
      </a-entity>

      <!-- third image  -->
      <a-entity id="group-point3" scale="0 0 0">
        <a-image spot="linkto:#point4;spotgroup:group-point4" position="-13 1 3"></a-image>
      </a-entity>

      <!-- fourth image  -->
      <a-entity id="group-point4" scale="0 0 0">
        <a-image spot="linkto:#point5;spotgroup:group-point5" position="-13 1 3"></a-image>
      </a-entity>

      <!-- fifth image  -->
      <a-entity id="group-point5" scale="0 0 0">
        <a-image spot="linkto:#point8;spotgroup:group-point8" position="-12 2 2"></a-image>
      </a-entity>


      <!-- sixth image 
      <a-entity id="group-point7" scale="0 0 0">
        <a-image spot="linkto:#point8;spotgroup:group-point8" position="13 3 -3"></a-image>
      </a-entity> -->

      <!-- seventh image  -->
      <a-entity id="group-point8" scale="0 0 0">
        <a-image spot="linkto:#point9;spotgroup:group-point9" position="13 3 -3"></a-image>
      </a-entity>

      <!-- Eighth  image  -->
      <a-entity id="group-point8" scale="0 0 0">
        <a-image spot="linkto:#point9;spotgroup:group-point9" position="13 3 -3"></a-image>
      </a-entity>

      <!-- ninth  image  -->
      <a-entity id="group-point8" scale="0 0 0">
        <a-image spot="linkto:#point9;spotgroup:group-point9" position="13 3 -3"></a-image>
      </a-entity>

      <!-- tenth image  -->
      <a-entity id="group-point10" scale="0 0 0">
        <a-image spot="linkto:#point11;spotgroup:group-point11" position="13 3 -3"></a-image>
      </a-entity>

      <!-- Eleventh image  -->
      <a-entity id="group-point11" scale="1 1 1">
        <a-image spot="linkto:#point12;spotgroup:group-point12" position="13 3 -3"></a-image>
      </a-entity>

      <!-- twelve image  -->
      <a-entity id="group-point12" scale="1 1 1">
        <a-image spot="linkto:#point13;spotgroup:group-point13" position="13 3 -3"></a-image>
      </a-entity>

      <!-- thirteenth image  -->
      <a-entity id="group-point13" scale="1 1 1">
        <a-image spot="linkto:#point14;spotgroup:group-point14" position="13 3 -3"></a-image>
      </a-entity>

      <!-- fourteenth image  -->
      <a-entity id="group-point14" scale="1 1 1">
        <a-image spot="linkto:#point15;spotgroup:group-point15" position="13 3 -3"></a-image>
      </a-entity>

      <!-- fifteenth image  -->
      <a-entity id="group-point15" scale="1 1 1"> </a-entity>

      

     

    </a-entity>

    <a-sky id="skybox" src="#point1"></a-sky>

    <!-- Camera and Cursor  -->
    <a-entity id="cam" camera position="0 1.6 0" look-controls>
      <a-entity cursor="fuse:true;fuseTimeout:1500" geometry="primitive:ring;radiusInner:0.01;radiusOuter:0.02"
        position="0 0 -1.8" material="shader:flat;color:#ff0000"
        animation__mouseenter="property:scale;to:3 3 3;startEvents:mouseenter;endEvents:mouseleave;dir:reverse;dur:2000;loop:1">
      </a-entity>
    </a-entity>
  </a-scene>
</body>

</html>